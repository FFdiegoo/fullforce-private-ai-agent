(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[445],{1470:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/upload",function(){return n(8900)}])},2227:function(e,a,n){"use strict";n.d(a,{O:function(){return t}});let t=(0,n(8967).eI)("https://xcrsfcwdjxsbmmrqnose.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhjcnNmY3dkanhzYm1tcnFub3NlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY1MzY3NTgsImV4cCI6MjA2MjExMjc1OH0.A3VBbFRGLe9oQmuqQ19oUH_ihjKahw-1isvv2XvbTz8")},8900:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return i}});var t=n(5893),r=n(7294),s=n(1163),o=n(2227);function l(){let[e,a]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),[l,i]=(0,r.useState)({afdeling:"",categorie:"",onderwerp:"",versie:""}),d=async()=>{if(!e){alert("Selecteer eerst een bestand");return}try{var n;s(!0);let t=Date.now(),r="".concat(t,"-").concat(e.name.replace(/[^a-zA-Z0-9.-]/g,"_")),d="".concat(l.afdeling,"/").concat(l.categorie,"/").concat(r),{data:c,error:u}=await o.O.storage.from("company-docs").upload(d,e);if(u)throw Error("Storage error: ".concat(u.message));let{error:m}=await o.O.from("documents_metadata").insert([{filename:e.name,safe_filename:r,storage_path:d,file_size:e.size,mime_type:e.type,...l,uploaded_by:(null===(n=(await o.O.auth.getUser()).data.user)||void 0===n?void 0:n.email)||"unknown",last_updated:new Date().toISOString(),ready_for_indexing:!0}]);if(m)throw Error("Database error: ".concat(m.message));a(null),i({afdeling:"",categorie:"",onderwerp:"",versie:""}),alert("Document succesvol ge\xfcpload!")}catch(e){console.error("Upload error:",e),alert(e instanceof Error?e.message:"Er ging iets mis bij het uploaden")}finally{s(!1)}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Document Upload"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer document"}),(0,t.jsx)("input",{type:"file",onChange:e=>{var n;return a((null===(n=e.target.files)||void 0===n?void 0:n[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n}),e&&(0,t.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Geselecteerd: ",e.name," (",(e.size/1024/1024).toFixed(2)," MB)"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Afdeling"}),(0,t.jsx)("input",{type:"text",value:l.afdeling,onChange:e=>i({...l,afdeling:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Bijv. Techniek",disabled:n})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categorie"}),(0,t.jsx)("input",{type:"text",value:l.categorie,onChange:e=>i({...l,categorie:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Bijv. Handleidingen",disabled:n})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Onderwerp"}),(0,t.jsx)("input",{type:"text",value:l.onderwerp,onChange:e=>i({...l,onderwerp:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Bijv. Machine X",disabled:n})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Versie"}),(0,t.jsx)("input",{type:"text",value:l.versie,onChange:e=>i({...l,versie:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Bijv. 1.0",disabled:n})]})]}),(0,t.jsx)("button",{onClick:d,disabled:!e||n||!l.afdeling||!l.categorie,className:"\n          w-full px-4 py-2 text-white font-medium rounded-md shadow-sm\n          ".concat(e&&!n&&l.afdeling&&l.categorie?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-400 cursor-not-allowed","\n          transition-colors duration-200\n        "),children:n?"Bezig met uploaden...":"Upload Document"})]})}function i(){let e=(0,s.useRouter)();async function a(){let{data:{session:a}}=await o.O.auth.getSession();a||e.push("/login")}return(0,r.useEffect)(()=>{a()},[]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 py-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Upload Portal"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Upload en categoriseer bedrijfsdocumenten"})]}),(0,t.jsx)(l,{})]})})}}},function(e){e.O(0,[234,888,774,179],function(){return e(e.s=1470)}),_N_E=e.O()}]);